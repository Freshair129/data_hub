graph TD
    subgraph Nextjs_App [Next.js Web Application]
        API_Routes[API Routes / App Router]
        UI_Components[React UI Components]
        Lib_Core[Lib Core: chatService, taskManager, etc.]
        Prisma_Client[Prisma Client / DB Adapter]
        Cache_Sync[Cache Sync Utility]
    end

    UI_Components -->|Queries| API_Routes
    API_Routes -->|Uses| Lib_Core
    Lib_Core -->|Database Ops| Prisma_Client
    Lib_Core -->|Caching Ops| Cache_Sync
    
    Cache_Sync -->|Read/Write| JSON_Cache[(Local JSON Cache)]
    Prisma_Client -->|Read/Write| Postgres[(PostgreSQL)]
